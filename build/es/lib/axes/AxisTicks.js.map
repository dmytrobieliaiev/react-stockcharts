{"version":3,"sources":["../../../../src/lib/axes/AxisTicks.js"],"names":["React","Component","PropTypes","hexToRGBA","isNotDefined","identity","tickTransform_svg_axisX","scale","tick","Math","round","tickTransform_svg_axisY","Tick","props","transform","stroke","tickStroke","tickStrokeOpacity","textAnchor","fontSize","fontFamily","x","y","x2","y2","dy","children","propTypes","arrayOf","Number","string","number","node","isRequired","drawOnCanvasStatic","ctx","result","tickTransform","canvas_dy","format","origin","beginPath","moveTo","lineTo","fillText","AxisTicks","helper","ticks","map","idx","orient","oneOf","innerTickSize","tickFormat","func","tickPadding","array","tickValues","defaultProps","tickArguments","domain","baseFormat","d","sign","tickSpacing","max","xScale","yScale","xAxis","strokeStyle","font","fillStyle","textAlign","forEach"],"mappings":"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","file":"AxisTicks.js","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { hexToRGBA, isNotDefined, identity } from \"../utils\";\n\nfunction tickTransform_svg_axisX(scale, tick) {\n\treturn [Math.round(scale(tick)), 0];\n}\n\nfunction tickTransform_svg_axisY(scale, tick) {\n\treturn [0, Math.round(scale(tick))];\n}\n\nclass Tick extends Component {\n\trender() {\n\t\tconst { transform, stroke, tickStroke, tickStrokeOpacity, textAnchor, fontSize, fontFamily } = this.props;\n\t\tconst { x, y, x2, y2, dy } = this.props;\n\t\treturn (\n\t\t\t<g className=\"tick\" transform={`translate(${ transform[0] }, ${ transform[1] })`} >\n\t\t\t\t<line shapeRendering=\"crispEdges\" opacity={tickStrokeOpacity} stroke={stroke} x2={x2} y2={y2} />\n\t\t\t\t<text\n\t\t\t\t\tdy={dy} x={x} y={y}\n\t\t\t\t\tfill={tickStroke}\n\t\t\t\t\tfontSize={fontSize}\n\t\t\t\t\tfontFamily={fontFamily}\n\t\t\t\t\ttextAnchor={textAnchor}>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</text>\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nTick.propTypes = {\n\ttransform: PropTypes.arrayOf(Number),\n\ttickStroke: PropTypes.string,\n\tstroke: PropTypes.string,\n\ttickStrokeOpacity: PropTypes.number,\n\ttextAnchor: PropTypes.string,\n\tfontSize: PropTypes.number,\n\tfontFamily: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\tx2: PropTypes.number,\n\ty2: PropTypes.number,\n\tdy: PropTypes.string,\n\tchildren: PropTypes.node.isRequired,\n};\n\nTick.drawOnCanvasStatic = (tick, ctx, result) => {\n\tconst { scale, tickTransform, canvas_dy, x, y, x2, y2, format } = result;\n\n\tconst origin = tickTransform(scale, tick);\n\n\tctx.beginPath();\n\n\tctx.moveTo(origin[0], origin[1]);\n\tctx.lineTo(origin[0] + x2, origin[1] + y2);\n\tctx.stroke();\n\n\tctx.fillText(format(tick), origin[0] + x, origin[1] + y + canvas_dy);\n};\n\nclass AxisTicks extends Component {\n\trender() {\n\t\tconst result = AxisTicks.helper(this.props, this.props.scale);\n\t\tconst { ticks, scale, tickTransform, tickStroke, tickStrokeOpacity, dy, x, y, x2, y2, textAnchor, fontSize, fontFamily, format, stroke } = result;\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t{ticks.map((tick, idx) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Tick key={idx} transform={tickTransform(scale, tick)}\n\t\t\t\t\t\t\tstroke={stroke}\n\t\t\t\t\t\t\ttickStroke={tickStroke} tickStrokeOpacity={tickStrokeOpacity}\n\t\t\t\t\t\t\tdy={dy} x={x} y={y}\n\t\t\t\t\t\t\tx2={x2} y2={y2} textAnchor={textAnchor}\n\t\t\t\t\t\t\tfontSize={fontSize} fontFamily={fontFamily}>{format(tick)}</Tick>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nAxisTicks.propTypes = {\n\torient: PropTypes.oneOf([\"top\", \"bottom\", \"left\", \"right\"]).isRequired,\n\tinnerTickSize: PropTypes.number,\n\ttickFormat: PropTypes.func,\n\ttickPadding: PropTypes.number,\n\tticks: PropTypes.array,\n\ttickValues: PropTypes.array,\n\tscale: PropTypes.func.isRequired,\n\tstroke: PropTypes.string.isRequired,\n\ttickStroke: PropTypes.string,\n\ttickStrokeOpacity: PropTypes.number,\n};\n\nAxisTicks.defaultProps = {\n\tinnerTickSize: 5,\n\ttickPadding: 6,\n\tticks: [10],\n\tstroke: \"#000\",\n\ttickStroke: \"#000\",\n\ttickStrokeOpacity: 1,\n};\n\nAxisTicks.helper = (props, scale) => {\n\tconst { orient, innerTickSize, tickFormat, tickPadding, fontSize, fontFamily } = props;\n\tconst { ticks: tickArguments, tickValues, tickStroke, tickStrokeOpacity } = props;\n\n\tconst ticks = isNotDefined(tickValues)\n\t\t? (scale.ticks\n\t\t\t? scale.ticks(...tickArguments)\n\t\t\t: scale.domain())\n\t\t: tickValues;\n\n\tconst baseFormat = scale.tickFormat\n\t\t? scale.tickFormat(...tickArguments)\n\t\t: identity;\n\n\tconst format = isNotDefined(tickFormat)\n\t\t? baseFormat\n\t\t: d => baseFormat(d) ? tickFormat(d) : \"\";\n\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n\tconst tickSpacing = Math.max(innerTickSize, 0) + tickPadding;\n\n\tlet tickTransform, x, y, x2, y2, dy, canvas_dy, textAnchor;\n\n\tif (orient === \"bottom\" || orient === \"top\") {\n\t\ttickTransform = tickTransform_svg_axisX;\n\t\tx2 = 0;\n\t\ty2 = sign * innerTickSize;\n\t\tx = 0;\n\t\ty = sign * tickSpacing;\n\t\tdy = sign < 0 ? \"0em\" : \".71em\";\n\t\tcanvas_dy = sign < 0 ? 0 : (fontSize * .71);\n\t\ttextAnchor = \"middle\";\n\t} else {\n\t\ttickTransform = tickTransform_svg_axisY;\n\t\tx2 = sign * innerTickSize;\n\t\ty2 = 0;\n\t\tx = sign * tickSpacing;\n\t\ty = 0;\n\t\tdy = \".32em\";\n\t\tcanvas_dy = (fontSize * .32);\n\t\ttextAnchor = sign < 0 ? \"end\" : \"start\";\n\t}\n\treturn { ticks, scale, tickTransform, tickStroke, tickStrokeOpacity, dy, canvas_dy, x, y, x2, y2, textAnchor, fontSize, fontFamily, format };\n};\n\nAxisTicks.drawOnCanvasStatic = (props, ctx, xScale, yScale) => {\n\tprops = { ...AxisTicks.defaultProps, ...props };\n\n\tconst { orient } = props;\n\tconst xAxis = (orient === \"bottom\" || orient === \"top\");\n\n\tconst result = AxisTicks.helper(props, xAxis ? xScale : yScale);\n\n\tconst { tickStroke, tickStrokeOpacity, textAnchor, fontSize, fontFamily } = result;\n\n\tctx.strokeStyle = hexToRGBA(tickStroke, tickStrokeOpacity);\n\n\tctx.font = `${ fontSize }px ${fontFamily}`;\n\tctx.fillStyle = tickStroke;\n\tctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\n\t// ctx.textBaseline = 'middle';\n\n\tresult.ticks.forEach((tick) => {\n\t\tTick.drawOnCanvasStatic(tick, ctx, result);\n\t});\n};\n\nexport default AxisTicks;\n"]}