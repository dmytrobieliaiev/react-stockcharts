{"version":3,"sources":["../../../src/lib/tooltip/OHLCTooltip.js"],"names":["OHLCTooltip","props","renderSVG","bind","moreProps","displayValuesFor","hideOnEmpty","xDisplayFormat","accessor","volumeFormat","ohlcFormat","percentFormat","displayTexts","chartConfig","width","height","displayXAccessor","currentItem","displayDate","open","high","low","close","volume","percent","na","isEmpty","item","originProp","origin","x","y","itemsToDisplay","children","Component","propTypes","className","PropTypes","string","func","bool","oneOfType","array","fontFamily","fontSize","number","onClick","textFill","labelFill","object","displayTextsDefault","d","o","h","l","c","v","defaultProps","date","defaultDisplay"],"mappings":"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","file":"OHLCTooltip.js","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { format } from \"d3-format\";\nimport { timeFormat } from \"d3-time-format\";\nimport displayValuesFor from \"./displayValuesFor\";\nimport GenericChartComponent from \"../GenericChartComponent\";\n\nimport { isDefined, functor } from \"../utils\";\nimport ToolTipText from \"./ToolTipText\";\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\n\nclass OHLCTooltip extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { displayValuesFor, hideOnEmpty } = this.props;\n\t\tconst {\n\t\t\txDisplayFormat,\n\t\t\taccessor,\n\t\t\tvolumeFormat,\n\t\t\tohlcFormat,\n\t\t\tpercentFormat,\n\t\t\tdisplayTexts\n\t\t} = this.props;\n\n\t\tconst { chartConfig: { width, height } } = moreProps;\n\t\tconst { displayXAccessor } = moreProps;\n\n\t\tconst currentItem = displayValuesFor(this.props, moreProps);\n\n\t\tlet displayDate, open, high, low, close, volume, percent;\n\t\tdisplayDate = open = high = low = close = volume = percent = displayTexts.na;\n\n\t\tconst isEmpty = isDefined(currentItem) && isDefined(accessor(currentItem));\n\n\t\tif (isEmpty) {\n\t\t\tconst item = accessor(currentItem);\n\t\t\tvolume = isDefined(item.volume) ? volumeFormat(item.volume) : displayTexts.na;\n\n\t\t\tdisplayDate = xDisplayFormat(displayXAccessor(item));\n\t\t\topen = ohlcFormat(item.open);\n\t\t\thigh = ohlcFormat(item.high);\n\t\t\tlow = ohlcFormat(item.low);\n\t\t\tclose = ohlcFormat(item.close);\n\t\t\tpercent = percentFormat((item.close - item.open) / item.open);\n\t\t}\n\n\t\tconst { origin: originProp } = this.props;\n\t\tconst origin = functor(originProp);\n\t\tconst [x, y] = origin(width, height);\n\n\t\tconst itemsToDisplay = {\n\t\t\tdisplayDate,\n\t\t\topen,\n\t\t\thigh,\n\t\t\tlow,\n\t\t\tclose,\n\t\t\tpercent,\n\t\t\tvolume,\n\t\t\tx,\n\t\t\ty\n\t\t};\n\t\tif (hideOnEmpty && !isEmpty) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.props.children(this.props, moreProps, itemsToDisplay);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<GenericChartComponent\n\t\t\t\tclip={false}\n\t\t\t\tsvgDraw={this.renderSVG}\n\t\t\t\tdrawOn={[\"mousemove\"]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nOHLCTooltip.propTypes = {\n\tclassName: PropTypes.string,\n\taccessor: PropTypes.func,\n\thideOnEmpty: PropTypes.bool,\n\txDisplayFormat: PropTypes.func,\n\tchildren: PropTypes.func,\n\tvolumeFormat: PropTypes.func,\n\tpercentFormat: PropTypes.func,\n\tohlcFormat: PropTypes.func,\n\torigin: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n\tfontFamily: PropTypes.string,\n\tfontSize: PropTypes.number,\n\tonClick: PropTypes.func,\n\tdisplayValuesFor: PropTypes.func,\n\ttextFill: PropTypes.string,\n\tlabelFill: PropTypes.string,\n\tdisplayTexts: PropTypes.object,\n};\n\nconst displayTextsDefault = {\n\td: \"Date: \",\n\to: \" O: \",\n\th: \" H: \",\n\tl: \" L: \",\n\tc: \" C: \",\n\tv: \" Vol: \",\n\tna: \"n/a\"\n};\n\nOHLCTooltip.defaultProps = {\n\thideOnEmpty: true,\n\taccessor: d => {\n\t\treturn {\n\t\t\tdate: d.date,\n\t\t\topen: d.open,\n\t\t\thigh: d.high,\n\t\t\tlow: d.low,\n\t\t\tclose: d.close,\n\t\t\tvolume: d.volume\n\t\t};\n\t},\n\txDisplayFormat: timeFormat(\"%Y-%m-%d\"),\n\tvolumeFormat: format(\".4s\"),\n\tpercentFormat: format(\".2%\"),\n\tohlcFormat: format(\".2f\"),\n\tdisplayValuesFor: displayValuesFor,\n\torigin: [0, 0],\n\tchildren: defaultDisplay,\n\tdisplayTexts: displayTextsDefault,\n};\n\nfunction defaultDisplay(props, moreProps, itemsToDisplay) {\n\n\t/* eslint-disable */\n\tconst {\n\t\tclassName,\n\t\ttextFill,\n\t\tlabelFill,\n\t\tonClick,\n\t\tfontFamily,\n\t\tfontSize,\n\t\tdisplayTexts\n\t} = props;\n\t/* eslint-enable */\n\n\tconst {\n\t\tdisplayDate,\n\t\topen,\n\t\thigh,\n\t\tlow,\n\t\tclose,\n\t\tvolume,\n\t\tx,\n\t\ty\n\t} = itemsToDisplay;\n\treturn (\n\t\t<g\n\t\t\tclassName={`react-stockcharts-tooltip-hover ${className}`}\n\t\t\ttransform={`translate(${x}, ${y})`}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t<ToolTipText\n\t\t\t\tx={0}\n\t\t\t\ty={0}\n\t\t\t\tfontFamily={fontFamily}\n\t\t\t\tfontSize={fontSize}\n\t\t\t>\n\t\t\t\t<ToolTipTSpanLabel\n\t\t\t\t\tfill={labelFill}\n\t\t\t\t\tkey=\"label\"\n\t\t\t\t\tx={0}\n\t\t\t\t\tdy=\"5\">{displayTexts.d}</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value\" fill={textFill}>{displayDate}</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_O\">{displayTexts.o}</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_O\" fill={textFill}>{open}</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_H\">{displayTexts.h}</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_H\" fill={textFill}>{high}</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_L\">{displayTexts.l}</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_L\" fill={textFill}>{low}</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_C\">{displayTexts.c}</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_C\" fill={textFill}>{close}</tspan>\n\t\t\t\t<ToolTipTSpanLabel fill={labelFill} key=\"label_Vol\">{displayTexts.v}</ToolTipTSpanLabel>\n\t\t\t\t<tspan key=\"value_Vol\" fill={textFill}>{volume}</tspan>\n\t\t\t</ToolTipText>\n\t\t</g>\n\t);\n}\n\nexport default OHLCTooltip;\n"]}